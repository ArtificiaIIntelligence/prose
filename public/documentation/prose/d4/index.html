<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>Microsoft Program Synthesis using Examples SDK &ndash; </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content="Microsoft Program Synthesis using Examples SDK Samples :  The PROSE SDK is a set of technologies for the automatic generation of programs from input-output examples. This repo includes samples and sample data for the Microsoft Program Synthesis using Examples SDK.">
	
	<script type="text/javascript">
		var vanity_domains = ["programbyexample.com","flashm.azurewebsites.net"];
		var canonical_path = "https:\/\/microsoft.github.io\/prose\/";
		for(var i = 0; i < vanity_domains.length; i++) {
			var vanity_domain = vanity_domains[i];
			var loc = window.location.toString();
			if (loc.indexOf(vanity_domain) != -1) {
				var new_loc = loc
					.replace("http://www." + vanity_domain + "/", canonical_path)
					.replace("http://" + vanity_domain + "/", canonical_path);
				window.location.replace(new_loc);
			}
		}
	</script>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,300,300italic,700,700italic'
          rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lora:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/bootstrap.min.css" media="screen">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.js" data-main="https://microsoft.github.io/prose/js/requires.js"></script>

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/hugo-bootswatch.css">
    <link href="https://microsoft.github.io/prose/css/bootstrap-flat.min.css" rel="stylesheet">
    <link href="https://microsoft.github.io/prose/css/bootstrap-flat-extras.min.css" rel="stylesheet">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/css/jasny-bootstrap.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/prism.css"/>
    <link href="https://microsoft.github.io/prose/css/prism-ghcolors.css" rel="stylesheet"/>
    <script src="https://microsoft.github.io/prose/js/prism.js"></script>

    <script type="text/javascript"
            src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        TeX: { equationNumbers: { autoNumber: "AMS" },
             extensions: ["AMSmath.js", "AMSsymbols.js"] }
      },
      TeX: {
        Macros: {
            llbracket: "[\\![",
            rrbracket: "]\\!]"
        }
      }
    });

    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        
        
        
        var all = MathJax.Hub.getAllJax(), i;
        for(i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

    </script>

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/main.css">

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/github-light.css">
    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/stylesheet.css">
</head>


<body id="bootstrap-overrides">

<script src="../../../js/lightbox.js"></script>
<div class="modal fade modal-profile" tabindex="-1" role="dialog" aria-labelledby="modalProfile" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal"><i class="fa fa-times"></i></button>
                <p></p>
            </div>
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>



    <div id="header_wrap" class="outer">
        <header class="innerTemplate">
           

        </header>
    </div>

    <div id="main_content_wrap" class="outer">
      <div id="main_content" class="innerTemplate">
          
          <div class="leftNav">
              
<p><a href="https://microsoft.github.io/prose/">Home</a></p>
<p><a href="https://microsoft.github.io/prose/playground">Playground</a></p>

<p>
	Tutorials
<ul>
	<li><a href="https://microsoft.github.io/prose/documentation/prose/tutorial">Getting Started</a></li>
</ul>
</p>
<p>
	Documentation
	<ul>
		<li><a href="https://microsoft.github.io/prose/documentation/prose/usage">Framework</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/extraction-text/intro">Text Extraction</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/extraction-web/intro">Web Extraction</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/flashfill/intro">Flash Fill</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/api">APIs</a></li>
	</ul>
</p>
<p><a href="https://microsoft.github.io/prose/team/">About Us</a></p>
<p><a href="https://microsoft.github.io/prose/faq/">FAQ</a></p>

          </div>
          <div class="topicContent" id="TopicContent">            
            
            

<p>Deductive strategy ($D^4$) is the main synthesis algorithm used by the PROSE SDK.
It relies on external annotations, provided by the DSL designer for the language operators &ndash; <a href="#witness-functions">witness functions</a>.
Our <a href="../../../documentation/prose/tutorial">tutorial</a> and samples show many use cases for specific witness functions.</p>

<h1 id="witness-functions">Witness Functions</h1>

<p>A witness function is a domain-specific deductive procedure for a parameter $k$ of an operator $F$, that, given an outer spec $\phi$ on $F$, answer a question: &ldquo;What should a program used as this parameter satisfy in order for the entire $F$ expression to satisfy $\phi$?&rdquo;
In other words, witness functions propagate specifications from expressions to their subexpressions.</p>

<p>There are two kinds of witness functions: non-conditional and conditional.</p>

<h2 id="non-conditional">Non-conditional</h2>

<p>Non-conditional witness functions have the following signature:</p>

<pre><code class="language-csharp">[WitnessFunction(&quot;OperatorName&quot;, paramIndex)]
static Spec Witness(GrammarRule rule, int parameter, Spec outerSpec);
</code></pre>

<p>Since PROSE uses .NET reflection to extract information about witness functions, you should make the actual types in your signature as precise as possible.
In particular, the <code>outerSpec</code> parameter specifies what kind of spec for $F$ your witness function can handle.
Typically a different witness function is written for each spec kind: it takes a different requirement to satisfy a <code>PrefixSpec</code> that an <code>ExampleSpec</code>.</p>

<p>A witness function may produce an <em>overapproximation</em> to the required spec instead of a necessary and sufficient spec for the parameter #$k$.
PROSE can still use such a witness function, but it should be marked with <code>Verify = true</code> in its <code>[WitnessFunction]</code> metadata attribute.</p>

<p>If <code>outerSpec</code> is inconsistent (no program can possibly satisfy it), witness function should return <code>null</code>.
<code>null</code> in PROSE is a placeholder for an &ldquo;always false&rdquo; spec.
(An &ldquo;always true&rdquo; spec is called <code>TopSpec</code>).</p>

<h2 id="conditional">Conditional</h2>

<p>Conditional witness functions depend not only on an outer spec on their operator, but also possibly on some other parameters of that operator.
They have the following signature:</p>

<pre><code class="language-csharp">[WitnessFunction(&quot;OperatorName&quot;, paramIndex, DependsOnParameters = new[] { prereqParam1, prereqParam2, ... }]
static Spec Witness(GrammarRule rule, int parameter, Spec outerSpec, Spec prereqSpec1, Spec prereqSpec2, ...);
</code></pre>

<p>As with non-conditional witness functions, prerequisite specs in the signature should be as precise as possible.
Typically they will be <code>ExampleSpec</code>s: deductive reasoning is easiest when you know precisely some fixed value of a prerequisite on the same input state.</p>

<p>You can use <code>DependsOnSymbols = new[] { prereqName1, prereqName2, ... }</code> in the attribute, referring to parameter names instead of their indices (if that&rsquo;s unambiguous).</p>

<h2 id="annotations">Annotations</h2>

<p>If a target grammar rule does not have a name (for instance, it is a <code>let</code> rule or a conversion rule <code>A := B</code>), you can use an <code>@witnesses</code> annotation in the grammar file to specify a designated holder class with witness functions for this rule.</p>

<pre><code class="language-dsl">string expr := @witnesses[WitnessesForSubstrLet] let x = ChooseInput(inputs, k) in SubStr(x, posPair);
</code></pre>

<pre><code class="language-csharp">static class WitnessesForSubstrLet
{
    [WitnessFunction(0)]
    static Spec Witness(LetRule rule, int parameter, Spec outerSpec);
}
</code></pre>

<p>You don&rsquo;t need to mention a rule name in the <code>[WitnessFunction]</code> attribute (the rule doesn&rsquo;t have one anyway).
You still have to specify the target parameter index.
In case of a <code>let</code> rule, it has two parameters: its &ldquo;binding&rdquo; expression (the part on the right-hand side of an equal sign) and its &ldquo;body&rdquo; expression (the part after **<code>in</code>**).
PROSE provides an automatic witness function for the body parameter, so you only to write one for the binding parameter (whose index in the containing <code>let</code> rule is $0$).</p>

<h1 id="rule-learners">Rule Learners</h1>

<p><em>Rule learners</em> are designed for use cases when you cannot express you deductive logic in terms of witness functions on individual parameters.
They are mini-strategies: search algorithms for one grammar rule.</p>

<blockquote>
<p><strong>Note:</strong> Usage of rule learners is generally discouraged: if you can describe deductive reasoning as a witness function, PROSE framework can do a more aggressive optimization of its search process.</p>
</blockquote>

<p>A rule learner has the following signature:</p>

<pre><code class="language-csharp">[RuleLearner(&quot;OperatorName&quot;)]
static ProgramSet Learn(SynthesisEngine engine, GrammarRule rule, Spec spec, CancellationToken token);
</code></pre>

<p>You can make recursive calls to <code>engine.LearnSymbol</code> in your rule learner to solve deductive subproblems.
The final result should be constructed as a <code>ProgramSet</code> out of such subproblem results.</p>

<blockquote>
<p><strong>Note:</strong> it is a good .NET practice to check on the given <code>CancellationToken</code> regularly and throw a <code>TaskCancelledException</code> when you detect a cancellation request.</p>
</blockquote>
            
          </div>    
          
          <div class="end-main">
          <p>&nbsp;</p>
        </div>
      </div>
    </div>
    
<div id="footer_wrap" class="outer">
    <footer class="inner">
        <p class="copyright">
        <table class="foot-table center-block">
            <tr>
                <td><a href="https://microsoft.github.io/prose/team/">About Us</a></td>
                <td><a href="https://www.microsoft.com/en-us/privacystatement/default.aspx">Privacy & Cookies</a></td>
                <td>
                    <a href="http://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/en-us.aspx">Trademark</a>
                </td>
                <td><a href="http://www.microsoft.com/en-us/legal/intellectualproperty/copyright/default.aspx">Terms of
                    Use</a></td>
                <td>&copy; Microsoft</td>
            </tr>
        </table>
        </p>
    </footer>
</div>


</body>
</html>