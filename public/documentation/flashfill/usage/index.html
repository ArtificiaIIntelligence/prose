<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>Microsoft Program Synthesis using Examples SDK &ndash; Usage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content="Microsoft Program Synthesis using Examples SDK Samples :  The PROSE SDK is a set of technologies for the automatic generation of programs from input-output examples. This repo includes samples and sample data for the Microsoft Program Synthesis using Examples SDK.">
	
	<script type="text/javascript">
		var vanity_domains = ["programbyexample.com","flashm.azurewebsites.net"];
		var canonical_path = "https:\/\/microsoft.github.io\/prose\/";
		for(var i = 0; i < vanity_domains.length; i++) {
			var vanity_domain = vanity_domains[i];
			var loc = window.location.toString();
			if (loc.indexOf(vanity_domain) != -1) {
				var new_loc = loc
					.replace("http://www." + vanity_domain + "/", canonical_path)
					.replace("http://" + vanity_domain + "/", canonical_path);
				window.location.replace(new_loc);
			}
		}
	</script>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,300,300italic,700,700italic'
          rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lora:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/bootstrap.min.css" media="screen">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.js" data-main="https://microsoft.github.io/prose/js/requires.js"></script>

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/hugo-bootswatch.css">
    <link href="https://microsoft.github.io/prose/css/bootstrap-flat.min.css" rel="stylesheet">
    <link href="https://microsoft.github.io/prose/css/bootstrap-flat-extras.min.css" rel="stylesheet">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/css/jasny-bootstrap.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/prism.css"/>
    <link href="https://microsoft.github.io/prose/css/prism-ghcolors.css" rel="stylesheet"/>
    <script src="https://microsoft.github.io/prose/js/prism.js"></script>

    <script type="text/javascript"
            src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        TeX: { equationNumbers: { autoNumber: "AMS" },
             extensions: ["AMSmath.js", "AMSsymbols.js"] }
      },
      TeX: {
        Macros: {
            llbracket: "[\\![",
            rrbracket: "]\\!]"
        }
      }
    });

    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        
        
        
        var all = MathJax.Hub.getAllJax(), i;
        for(i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

    </script>

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/main.css">

    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/github-light.css">
    <link rel="stylesheet" href="https://microsoft.github.io/prose/css/stylesheet.css">
</head>


<body id="bootstrap-overrides">

<script src="../../../js/lightbox.js"></script>
<div class="modal fade modal-profile" tabindex="-1" role="dialog" aria-labelledby="modalProfile" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal"><i class="fa fa-times"></i></button>
                <p></p>
            </div>
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>



    <div id="header_wrap" class="outer">
        <header class="innerTemplate">
           Usage

        </header>
    </div>

    <div id="main_content_wrap" class="outer">
      <div id="main_content" class="innerTemplate">
          
          <div class="leftNav">
              
<p><a href="https://microsoft.github.io/prose/">Home</a></p>
<p><a href="https://microsoft.github.io/prose/playground">Playground</a></p>

<p>
	Tutorials
<ul>
	<li><a href="https://microsoft.github.io/prose/documentation/prose/tutorial">Getting Started</a></li>
</ul>
</p>
<p>
	Documentation
	<ul>
		<li><a href="https://microsoft.github.io/prose/documentation/prose/usage">Framework</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/extraction-text/intro">Text Extraction</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/extraction-web/intro">Web Extraction</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/flashfill/intro">Flash Fill</a></li>
		<li><a href="https://microsoft.github.io/prose/documentation/api">APIs</a></li>
	</ul>
</p>
<p><a href="https://microsoft.github.io/prose/team/">About Us</a></p>
<p><a href="https://microsoft.github.io/prose/faq/">FAQ</a></p>

          </div>
          <div class="topicContent" id="TopicContent">            
            
            <div id="toc" class="well well-sm col-md-4 col-sm-12 pull-right">
                <nav id="TableOfContents">
<ul>
<li><a href="#basic-usage">Basic usage</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#one-example-with-multiple-strings">One example with multiple strings</a></li>
<li><a href="#multiple-examples">Multiple examples</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#inputs-without-known-outputs">Inputs without known outputs</a></li>
<li><a href="#learning-multiple-programs">Learning multiple programs</a></li>
<li><a href="#serializing-programs">Serializing programs</a></li>
<li><a href="#api">API</a>
<ul>
<li><a href="#flashfillinput-and-flashfillexample-types"><code>FlashFillInput</code> and <code>FlashFillExample</code> types</a></li>
<li><a href="#learning-flashfill-programs">Learning FlashFill programs</a></li>
</ul></li>
</ul>
</nav>
            </div>
            
            

<p>The FlashFill API is accessed through the <code>FlashFill.FlashFillProgram</code> class.
The primary method is <code>Learn()</code> which takes a set of examples
and learns a FlashFill program consistent with those examples. In order to use
FlashFill, you need assembly references to <code>FlashFill.dll</code> and
<code>FlashFill.Semantics.dll</code>.</p>

<h1 id="basic-usage">Basic usage</h1>

<pre><code class="language-csharp">IEnumerable&lt;FlashFillExample&gt; examples = new[]
{
    new FlashFillExample(&quot;Greta Hermansson&quot;, &quot;Hermansson, G.&quot;)
};
var program = FlashFillProgram.Learn(examples);
var output = program.Run(&quot;Kettil Hansson&quot;); // output is &quot;Hansson, K.&quot;
</code></pre>

<p>The examples are given as an <code>IEnumerable&lt;FlashFillExample&gt;</code> with the input and
the correct output. They may also be provided as an
<code>IDictionary&lt;string, string&gt;</code> or <code>IDictionary&lt;IEnumerable&lt;string, string&gt;&gt;</code>.
Note that the number of strings must be the same for all inputs.</p>

<h4 id="one-example-with-multiple-strings">One example with multiple strings</h4>

<pre><code class="language-csharp">var examples = new[]
{
    new FlashFillExample(new FlashFillInput(&quot;Greta&quot;, &quot;Hermansson&quot;), &quot;Hermansson, G.&quot;)
};
FlashFillProgram program = FlashFillProgram.Learn(examples);
string output = program.Run(&quot;Kettil&quot;, &quot;Hansson&quot;); // output is &quot;Hansson, K.
</code></pre>

<h4 id="multiple-examples">Multiple examples</h4>

<p>FlashFill can be given multiple examples in order to generate a program that
will generalize over differently formatted inputs. In this example, we give
FlashFill a phone number to normalized in two different formats and it is able
to take a phone number in a third similar format and normalize it as well.</p>

<pre><code class="language-csharp">var examples = new[]
{
    new FlashFillExample(&quot;212-555-0183&quot;, &quot;212-555-0183&quot;),
    new FlashFillExample(&quot;(212) 555 0183&quot;, &quot;212-555-0183&quot;)
};
FlashFillProgram program = FlashFillProgram.Learn(examples);
string output = program.Run(&quot;425 311 1234&quot;); // output is &quot;425-311-1234&quot;
</code></pre>

<p>If your input data is in multiple formats, you will likely have to provide
more than one example. A common workflow is to have the user give a small
number of examples and then inspect the output and have the option of
providing additional examples if they discover an undesired result.
Note that there is no special API for amending a program given new examples,
just call <code>Learn()</code> again with all of the examples.</p>

<h1 id="inputs-without-known-outputs">Inputs without known outputs</h1>

<p>Most likely, when learning a program, you will have some idea of other inputs
you intend to run the program on in the future. FlashFill can take those inputs
and use them to help decide which program to return.</p>

<pre><code class="language-csharp">var examples = new Dictionary&lt;string, string&gt;
{
    { &quot;02/04/1953&quot;, &quot;1953-04-02&quot; }
};
var additionalInputs = new[]
{
    &quot;04/02/1962&quot;,
    &quot;27/08/1998&quot;
};
FlashFillProgram program = FlashFillProgram.Learn(examples, additionalInputs);
string output = program.Run(&quot;31/01/1983&quot;); // output is &quot;1983-01-31&quot;
</code></pre>

<h1 id="learning-multiple-programs">Learning multiple programs</h1>

<p>There are usually a large number of programs consistent with any given set of
examples. FlashFill has a ranking scheme which it uses to return the most
likely program for the examples it has seen, but in some cases this may not
be the desired program.</p>

<p><code>LearnTopK</code> has a parameter <code>k</code> which specifies how many programs
it should try to learn; it returns the top <code>k</code> ranked programs (or programs with
the top <code>k</code> ranks if there are ties).</p>

<pre><code class="language-csharp">var examples = new[]
{
    new FlashFillExample(&quot;Greta Hermansson&quot;, &quot;Hermansson, G.&quot;)
};
// Learn top 10 programs instead of just the single top program.
IEnumerable&lt;FlashFillProgram&gt; programs = FlashFillProgram.LearnTopK(examples, k: 10);
foreach (FlashFillProgram program in programs)
{
    Console.WriteLine(program.Run(&quot;Kettil hansson&quot;)); // note &quot;hansson&quot; is lowercase
}
</code></pre>

<p>The first several programs output &ldquo;doe, J.&rdquo;, but after that one outputs
&ldquo;Doe, J.&rdquo;. This could be used to ask the user which they meant or to do
automated reranking of the top results based on some logic other than
FlashFill&rsquo;s internal ranking system.</p>

<h1 id="serializing-programs">Serializing programs</h1>

<p>Sometimes you will want to learn a program in one session and run it on other
data in a future session or transfer learned programs between computers.
In order to do so, FlashFill supports serializing programs:</p>

<pre><code class="language-csharp">IEnumerable&lt;FlashFillExample&gt; examples = new[]
{
    new FlashFillExample(&quot;Kettil Hansson&quot;, &quot;Hansson, K.&quot;)
};
FlashFillProgram program = FlashFillProgram.Learn(examples);
// FlashFillPrograms can be serialized using .ToString().
string serializedProgram = program.ToString();
// Serialized programs can be loaded in another program using the FlashFill API using .Load():
FlashFillProgram parsedProgram = FlashFillProgram.Load(serializedProgram);
// The program can then be run on new inputs:
Console.WriteLine(parsedProgram.Run(&quot;Etelka Bala&quot;)); // outputs &quot;Bala, E.&quot;
</code></pre>

<h1 id="api">API</h1>

<p>See <a href="../../../documentation/api">Documentation</a> for the full API documentation.</p>

<h2 id="flashfillinput-and-flashfillexample-types"><code>FlashFillInput</code> and <code>FlashFillExample</code> types</h2>

<p><code>FlashFillInput</code> wraps a single input of one or more strings and
<code>FlashFillExample</code> wraps a <code>FlashFillInput</code> and a corresponding output <code>string</code>.
The FlashFill API methods all have helpers that take <code>string</code> based types
in addition to those types.</p>

<pre><code class="language-csharp">var input1 = new FlashFillInput(&quot;one string&quot;);
var input2 = new FlashFillInput(&quot;two&quot;, &quot;strings&quot;);
var input3 = new FlashFillInput(new List&lt;string&gt;() { &quot;a&quot;, &quot;b&quot; });
string[] strs = input3.InputStrings;

var example1 = new FlashFillExample(input1, &quot;out&quot;);
var example2 = new FlashFillExample(&quot;in&quot;, &quot;out&quot;);
var example3 = new FlashFillExample(new List&lt;string&gt;() { &quot;a&quot;, &quot;b&quot; }, &quot;out&quot;);
FlashFillInput ex3Input = example3.Input;
string ex3Output = example3.Output;
</code></pre>

<h2 id="learning-flashfill-programs">Learning FlashFill programs</h2>

<p><code>FlashFillProgram</code> has three different methods for learning:</p>

<ul>
<li><code>Learn()</code> returns the single top-ranked program as a <code>FlashFillProgram</code>.</li>
<li><code>LearnTopK()</code> takes an integer <code>k</code> and returns the top-<code>k</code> ranked
programs as an <code>IEnumerable&lt;FlashFillProgram&gt;</code>.</li>
<li><code>LearnAll()</code> learns all programs consistent with the examples, giving
the result compactly as a <code>ProgramSet</code>.</li>
</ul>

<p>All three have variants that take the examples as an
<code>IEnumerable&lt;FlashFillExample&gt;</code>, <code>IDictionary&lt;string, string&gt;</code>,
or <code>IDictionary&lt;IEnumerable&lt;string&gt;, string&gt;</code>.</p>

<p>To run a <code>FlashFillProgram</code>, use its <code>Run()</code> method:</p>

<pre><code class="language-csharp">public string Run(FlashFillInput input)

public string Run(IEnumerable&lt;string&gt; input)

public string Run(params string[] input)
</code></pre>
            
          </div>    
          
          <div class="end-main">
          <p>&nbsp;</p>
        </div>
      </div>
    </div>
    
<div id="footer_wrap" class="outer">
    <footer class="inner">
        <p class="copyright">
        <table class="foot-table center-block">
            <tr>
                <td><a href="https://microsoft.github.io/prose/team/">About Us</a></td>
                <td><a href="https://www.microsoft.com/en-us/privacystatement/default.aspx">Privacy & Cookies</a></td>
                <td>
                    <a href="http://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/en-us.aspx">Trademark</a>
                </td>
                <td><a href="http://www.microsoft.com/en-us/legal/intellectualproperty/copyright/default.aspx">Terms of
                    Use</a></td>
                <td>&copy; Microsoft</td>
            </tr>
        </table>
        </p>
    </footer>
</div>


</body>
</html>